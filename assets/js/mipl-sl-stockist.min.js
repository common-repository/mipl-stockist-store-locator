var $MIPL_SL_MAP_SETTINGS=null,$MIPL_SL_MAP_FILTERS=null;function mipl_sl_stockist_init_map(){mipl_sl_stockist_init()}function mipl_sl_stockist_init(){if(0==jQuery("#mipl_sl_stockist_map").length)return!1;var t=(new Date).getTime();jQuery.post($MIPL_ENDPOINT+"mipl-stockist-store-locator/v1/get-map-settings",{nocache:t,cache:!1},(function(t){$MIPL_SL_MAP_SETTINGS=t,mipl_sl_init_map(),mipl_sl_set_current_location_filters(),mipl_sl_update_stores(),mipl_sl_add_curr_loc_pin(),mipl_sl_autocomplete_place()})),jQuery.post($MIPL_ENDPOINT+"mipl-stockist-store-locator/v1/get-map-filters",(function(t){$MIPL_SL_MAP_FILTERS=t,mipl_sl_load_filters()}))}function mipl_sl_template(t,i){return document.getElementById(t).innerHTML.replace(/{(\w*)}/g,(function(t,l){return i.hasOwnProperty(l)?i[l]:""}))}function mipl_sl_add_curr_loc_pin(){var t=localStorage.getItem("mipl_sl_current_location");t&&(t=JSON.parse(t),mipl_map_update_current_location_marker(t))}function mipl_sl_update_stores(){var t=jQuery("#stockist_filter_form").serializeArray();jQuery('#stockist_filter_form [type="submit"]').text(mipl_sl_scriptvars.loading);jQuery.post("?mi_action=miplsl_load_store",t,(function(t){return jQuery('#stockist_filter_form [type="submit"]').text(mipl_sl_scriptvars.submit),jQuery(".mipl_sl_stockist_listing").html(t),""==t&&jQuery(".mipl_sl_stockist_listing").html('<p class="mipl_sl_search_result" style="text-align:center;" >'+mipl_sl_scriptvars.nosearchresult+"</p>"),mipl_map_update_map_markers(),!1}))}function mipl_sl_save_current_location(t){localStorage.setItem("mipl_sl_current_location",JSON.stringify(t)),mipl_sl_set_current_location_filters(),mipl_sl_add_curr_loc_pin()}function mipl_sl_load_filters(){$mipl_filter_data=$MIPL_SL_MAP_FILTERS,jQuery("#mipl_sl_store_category").find("option:not(:first)").remove(),jQuery("#mipl_sl_distance").find("option:not(:first)").remove();for(var t=0;t<$mipl_filter_data.category.length;t++)cat_name=$mipl_filter_data.category[t].name.charAt(0).toUpperCase()+$mipl_filter_data.category[t].name.slice(1),jQuery("#mipl_sl_store_category").append("<option value='"+$mipl_filter_data.category[t].term_id+"'>"+cat_name+"</option>");for(var i=0;i<$mipl_filter_data.distance.length;i++){var l="";$mipl_filter_data.distance[i]==$mipl_filter_data.default_distance&&(l='selected="selected"'),jQuery("#mipl_sl_distance").append("<option value='"+$mipl_filter_data.distance[i]+"' "+l+" >"+$mipl_filter_data.distance[i]+" "+$mipl_filter_data.distance_type+"</option>")}0==$mipl_filter_data.category.length&&jQuery("#mipl_sl_store_category").closest(".mipl_sl_input_wrap").css("display","none")}function mipl_sl_get_current_location(){navigator.geolocation&&navigator.geolocation.getCurrentPosition((function(t){var i={lat:t.coords.latitude,lng:t.coords.longitude};mipl_map_get_geolocation(i,(function(t){mipl_sl_save_current_location(t)}))}))}function mipl_sl_set_current_location_filters(){var t=localStorage.getItem("mipl_sl_current_location");null!==(t=JSON.parse(t))&&(jQuery("#mipl_sl_current_location").val(t.address),jQuery("#mipl_sl_current_location_latitude").val(t.latitude),jQuery("#mipl_sl_current_location_longitude").val(t.longitude))}function miplsl_get_infowindow_content(t,i){jQuery(t).attr("data-store_id");var l=jQuery(t).attr("data-store_latitude"),e=jQuery(t).attr("data-store_longitude"),_=jQuery("#mipl_sl_current_location_latitude").val(),a=jQuery("#mipl_sl_current_location_longitude").val(),s=jQuery(t).attr("data-image"),r=jQuery(t).attr("data-hide_image");jQuery(t).find(".mipl_sl_store_title").parent("a").length>0?$item_permalink='<a href="'+jQuery(t).find(".mipl_sl_store_title").parent("a").attr("href")+'"><strong class="mipl_sl_title">'+jQuery(t).find(".mipl_sl_store_title").text()+"</strong></a>":$item_permalink='<strong class="mipl_sl_title">'+jQuery(t).find(".mipl_sl_store_title").text()+"</strong>";var n="",o="",m="",c="",p="",d="",u="",f="";return jQuery(t).find(".mipl_sl_item_row").each((function(){null!=jQuery(this).attr("data-address")&&(n=jQuery(this).attr("data-address")),null!=jQuery(this).attr("data-tel")&&(o=jQuery(this).attr("data-tel")),null!=jQuery(this).attr("data-email")&&(m=jQuery(this).attr("data-email")),null!=jQuery(this).attr("data-web")&&(c=jQuery(this).attr("data-web")),null!=jQuery(this).attr("data-time")&&(p=jQuery(this).attr("data-time"))})),"yes"==jQuery(t).attr("data-infotime")&&(d=""!=p?'<div class="mipl_sl_item_row" id="mipl_sl_time_with_icon_infowindow">\n            <div class="icon mipl-sl-icon-time"></div>\n            '+p+"\n        </div>":""),"yes"==jQuery(t).attr("data-infosocial")&&(u='<div class="mipl_sl_item_row">\n            <div class="mipl_sl_social_media_links">\n            '+jQuery(t).find(".mipl_sl_item_row .mipl_sl_social_media_links").html()+"\n            </div>\n        </div>"),$address_data=""!=n?'<div class="mipl_sl_item_row">\n        <div class="icon mipl-sl-icon-home"></div>\n        '+n+"\n    </div>":"",$tel_data=""!=o?'<div class="mipl_sl_item_row">\n        <div class="icon mipl-sl-icon-call"></div>\n        <a href="tel:'+o+'">'+o+"</a>\n    </div>":"",$email_data=""!=m?'<div class="mipl_sl_item_row">\n        <div class="icon mipl-sl-icon-email"></div>\n        <a href="mailto:'+m+'">'+m+"</a>\n    </div>":"",$web_data=""!=c?'<div class="mipl_sl_item_row">\n        <div class="icon mipl-sl-icon-android-globe"></div>\n        <a target="_blank" href="'+c+'">'+c+"</a>\n    </div>":"",$map_url="https://maps.google.com?saddr=current location&daddr="+l+", "+e,"osm-map"==i&&($map_url="https://www.openstreetmap.org/directions?engine=osrm_car&route="+_+","+a+";"+l+","+e),"bing-map"==i&&($map_url="https://bing.com/maps/default.aspx?rtp=pos."+_+"_"+a+"~pos."+l+"_"+e),"here-map"==i&&($map_url="https://share.here.com/r/mylocation/"+l+","+e),""!=s&&"yes"!=r&&(f='<img src="'+s+'" width="70px" alt="img" />'),$infowindow='<div class="mipl_sl_infowindow_content">   \n        '+f+"     \n        "+$item_permalink+"\n        "+$address_data+"\n        "+$tel_data+"\n        "+$email_data+"\n        "+$web_data+"\n        "+d+'\n        <div class="mipl_sl_item_row">\n            <div class="icon mipl-sl-icon-navigate mipl_sl_stockist_list_icon"></div>\n            <a class="mipl_sl_direction_button" href="'+$map_url+'" target="_blank">'+mipl_sl_scriptvars.get_directions+"</a>\n        </div>\n        "+u+"\n    </div>",$infowindow}jQuery(document).ready((function(){jQuery("#stockist_filter_form").on("submit",(function(){return mipl_sl_update_stores(),!1})),jQuery("#mipl_sl_getcurrentlocation").click((function(){return mipl_sl_get_current_location(),!1})),jQuery(".mipl_sl_stockist").on("click",".mipl_sl_full_week_time_shedule",(function(){var t=jQuery(this).closest(".mipl_sl_stockist_item").attr("data-store_id"),i=jQuery(this).closest(".mipl_sl_stockist_item").find(".mipl_sl_full_week_time");if(0!=i.children().length)return jQuery(".mipl_sl_full_week_time").not(i).slideUp(400),jQuery(this).closest(".mipl_sl_item_row").find("div.mipl_sl_full_week_time").slideToggle(400),!1;var l=new Array;l.push({name:"store_id",value:t}),jQuery.post("?mipl_action=get-store-opening-details",l,(function(i){jQuery(".mipl_sl_full_week_time").slideUp(400);var l=jQuery(".mipl_sl_stockist").find(`[data-store_id='${t}']`);return l.find(".mipl_sl_full_week_time").html(i),l.find(".mipl_sl_full_week_time").slideToggle(400),!1}))}))}));